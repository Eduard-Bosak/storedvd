# ИТОГОВАЯ ОЦЕНКА РАБОТЫ

**Проект:** Интернет-магазин DVD на Django/DRF  
**Дата проверки:** 26 октября 2025 г.

---

## ОБЩАЯ ОЦЕНКА: 4 балла из 7 возможных

**Минимальное количество баллов для зачёта:** 5 баллов  
**Статус:** РАБОТА ТРЕБУЕТ ДОРАБОТКИ

---

## ЧТО ВЫПОЛНЕНО КОРРЕКТНО

1. **Структура проекта** - создана правильная архитектура Django приложения
2. **Модели данных** - разработаны модели Section, Product, Order, OrderLine, Discount
3. **URL-маршрутизация** - настроены маршруты для всех страниц
4. **Шаблоны** - созданы HTML-шаблоны для отображения страниц
5. **База данных** - присутствуют тестовые данные (5 разделов, 3 товара)
6. **Формы** - создана форма поиска SearchForm
7. **Контекстные процессоры** - реализован процессор для передачи данных в шаблоны
8. **Использование ORM** - применяются QuerySet API и фильтрация данных
9. **Class-based views** - использован ProductDetailView для детальной страницы товара

---

## ОБНАРУЖЕННЫЕ КРИТИЧЕСКИЕ ОШИБКИ

### 1. Синтаксическая ошибка в views.py (строка 46)

**Файл:** shop/views.py  
**Проблема:**
```python
# НЕПРАВИЛЬНО:
order_by('?'[:4])

# ПРАВИЛЬНО:
order_by('?')[:4]
```

**Описание:** Неверное размещение среза списка. Срез применялся к строке '?' вместо результата выборки QuerySet.

**Последствия:** Server Error 500 при попытке открыть страницу деталей товара. Приложение полностью падало при переходе на страницу product_detail.html.

**Потеря баллов:** -1.0 балл

---

### 2. Опечатка в названии поля модели при поиске

**Файл:** shop/views.py (функция search, строка 54)  
**Проблема:**
```python
# НЕПРАВИЛЬНО:
Q(drector__icontains = q)

# ПРАВИЛЬНО:
Q(director__icontains = q)
```

**Описание:** Опечатка в названии поля - использовано drector вместо director. При этом в модели Product поле называется director.

**Последствия:** Поиск по режиссёрам не работал. При поиске фильмов по имени режиссёра система возвращала "Ничего не найдено", даже если такие записи были в базе данных.

**Потеря баллов:** -0.5 балла

---

### 3. Отсутствие настроек для медиафайлов

**Файл:** storedvd/settings.py  
**Проблема:** В файле настроек отсутствовали обязательные параметры MEDIA_URL и MEDIA_ROOT

**Что отсутствовало:**
```python
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
```

**Описание:** Без этих настроек Django не знает, где хранить и как обслуживать загруженные файлы (изображения товаров).

**Последствия:** Изображения товаров не отображались на сайте. При попытке доступа к загруженным файлам возникала ошибка 404.

**Потеря баллов:** -0.5 балла

---

### 4. Неправильная настройка DEBUG в режиме разработки

**Файл:** storedvd/settings.py (строка 25)  
**Проблема:**
```python
# НЕПРАВИЛЬНО для разработки:
DEBUG = False

# ПРАВИЛЬНО при разработке:
DEBUG = True
```

**Описание:** Режим DEBUG = False предназначен только для production-окружения. В режиме разработки всегда должен быть DEBUG = True.

**Последствия:** 
- Невозможно было увидеть детальные сообщения об ошибках
- Вместо полезной информации об ошибке показывалась только страница "Server Error (500)"
- Существенно усложнялась отладка приложения

**Потеря баллов:** -0.5 балла

---

### 5. Обработчик 404 ошибки не зарегистрирован

**Файл:** storedvd/urls.py  
**Проблема:** Функция handler404 была создана в views.py, но не зарегистрирована в главном urls.py

**Что отсутствовало:**
```python
handler404 = 'shop.views.handler404'
```

**Описание:** Без регистрации обработчика Django использует стандартную страницу 404, а не кастомную.

**Последствия:** При обращении к несуществующим страницам показывалась стандартная страница Django, а не разработанный шаблон 404.html.

**Потеря баллов:** -0.5 балла

---

## НЕТОЧНОСТИ В ШАБЛОНЕ search.html

**Файл:** shop/templates/shop/search.html

### Обнаруженные ошибки:

1. **Опечатка в методе пагинации (строка 26)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   {% if products.has_pravious %}
   
   <!-- ПРАВИЛЬНО: -->
   {% if products.has_previous %}
   ```
   Метод называется has_previous, а не has_pravious.

2. **Неверная переменная в цикле (строка 33)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   {% if product.number == i %}
   
   <!-- ПРАВИЛЬНО: -->
   {% if products.number == i %}
   ```
   Используется переменная product (единственное число) вместо products (объект Page).

3. **Лишний символ в закрывающем теге (строка 15)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   </div>>
   
   <!-- ПРАВИЛЬНО: -->
   </div>
   ```

4. **Лишний символ в закрывающем теге li (строка 38)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   </li>>
   
   <!-- ПРАВИЛЬНО: -->
   </li>
   ```

5. **Неправильное применение класса (строка 36)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   <li class="current">
       <a href="...">{{ i }}</a>
   </li>
   
   <!-- ПРАВИЛЬНО: -->
   <li>
       <a href="...">{{ i }}</a>
   </li>
   ```
   Класс "current" должен быть только на активной странице, а не на всех ссылках.

6. **Лишние пробелы в атрибутах href (строки 27, 37, 43)**
   ```html
   <!-- НЕПРАВИЛЬНО: -->
   href=" {{ request.path }}"
   
   <!-- ПРАВИЛЬНО: -->
   href="{{ request.path }}"
   ```

**Последствия:** Пагинация работала некорректно, невозможно было корректно переключаться между страницами результатов поиска.

**Потеря баллов:** -0.3 балла за каждую ошибку (итого -1.8 балла)

---

## НЕВЫПОЛНЕННЫЕ ТРЕБОВАНИЯ ДОМАШНЕГО ЗАДАНИЯ

Согласно критериям оценивания, необходимо было выполнить следующие задачи:

### К1 - Документация в формате Swagger (0/1 балл)
**Статус:** НЕ РЕАЛИЗОВАНО

**Что требовалось:**
- Установить drf-yasg или drf-spectacular
- Настроить автоматическую генерацию документации API
- Обеспечить доступ к Swagger UI по определённому URL

**Что отсутствует:**
- Пакет для генерации Swagger не установлен
- Документация API не создана
- Endpoints для Swagger не настроены

---

### К2 - Настройка CORS для открытого API (0/1 балл)
**Статус:** НЕ РЕАЛИЗОВАНО

**Что требовалось:**
- Установить django-cors-headers
- Настроить CORS_ALLOWED_ORIGINS или CORS_ALLOW_ALL_ORIGINS
- Добавить CorsMiddleware в MIDDLEWARE

**Что отсутствует:**
- Пакет django-cors-headers не установлен
- CORS настройки отсутствуют в settings.py
- Middleware не добавлен

**Последствия:** API недоступен для внешних фронтенд-приложений из-за политики Same-Origin Policy.

---

### К3 - Контейнеризация с Docker и docker-compose (0/3 балла)
**Статус:** НЕ РЕАЛИЗОВАНО

**Что требовалось:**
- Создать Dockerfile для приложения Django
- Создать docker-compose.yml для оркестрации сервисов
- Настроить сервисы: web (Django), db (PostgreSQL)
- Обеспечить быстрый запуск инфраструктуры

**Что отсутствует:**
- Файл Dockerfile не создан
- Файл docker-compose.yml не создан
- Используется SQLite вместо PostgreSQL
- Нет настроек для production-окружения

---

### К4 - Описание порядка запуска приложения (0/2 балла)
**Статус:** НЕ РЕАЛИЗОВАНО

**Что требовалось:**
- Документировать процесс запуска через docker-compose up
- Описать необходимые команды
- Указать URL для доступа к приложению
- Предоставить примеры использования

**Что отсутствует:**
- README.md с инструкциями отсутствует
- Документация по развёртыванию не создана

---

## ДЕТАЛИЗАЦИЯ БАЛЛОВ

| Критерий | Максимум | Получено | Комментарий |
|----------|----------|----------|-------------|
| К1 - Документация Swagger | 1 | 0 | Не реализовано |
| К2 - CORS для API | 1 | 0 | Не реализовано |
| К3 - Docker & docker-compose | 3 | 0 | Не реализовано |
| К4 - Описание запуска | 2 | 0 | Не реализовано |
| **Итого по заданию** | **7** | **0** | **Требования не выполнены** |
| **Качество базовой реализации** | **10** | **4** | **Множественные ошибки** |
| **ОБЩИЙ ИТОГ** | **17** | **4** | **Требуется доработка** |

---

## ПОЛОЖИТЕЛЬНЫЕ СТОРОНЫ РАБОТЫ

1. **Правильная организация проекта** - соблюдена структура Django приложения с разделением на приложения
2. **Использование контекстных процессоров** - правильный подход к передаче общих данных во все шаблоны
3. **Реализация пагинации** - присутствует разбиение результатов на страницы
4. **Применение Q-объектов** - корректное использование сложных запросов для поиска по нескольким полям
5. **Generic views** - использование class-based views (ProductDetailView) вместо функциональных представлений
6. **Связанные модели** - правильно настроены ForeignKey отношения между моделями
7. **Валидаторы** - применены MinValueValidator и MaxValueValidator для проверки данных
8. **Verbose names** - все поля моделей снабжены человекочитаемыми названиями на русском языке

---

## РЕКОМЕНДАЦИИ ПО ДОРАБОТКЕ

### Приоритетные задачи для получения зачёта:

1. **Реализовать документацию Swagger** (К1)
   - Установить: `pip install drf-yasg`
   - Добавить в INSTALLED_APPS
   - Настроить URL для Swagger UI
   - Добавить описания к API endpoints

2. **Настроить CORS** (К2)
   - Установить: `pip install django-cors-headers`
   - Добавить 'corsheaders' в INSTALLED_APPS
   - Добавить middleware: 'corsheaders.middleware.CorsMiddleware'
   - Настроить CORS_ALLOW_ALL_ORIGINS = True (для разработки)

3. **Создать Docker-контейнеры** (К3)
   - Написать Dockerfile с многоступенчатой сборкой
   - Создать docker-compose.yml с сервисами web и db
   - Настроить PostgreSQL вместо SQLite
   - Добавить volume для статических файлов и базы данных

4. **Документировать процесс запуска** (К4)
   - Создать README.md с подробными инструкциями
   - Описать команду: `docker-compose up`
   - Указать адреса доступа к приложению и Swagger
   - Добавить раздел с часто встречающимися проблемами

### Дополнительные улучшения кода:

1. **Добавить больше тестовых данных** - создайте fixtures с разнообразными товарами
2. **Реализовать корзину покупок** - добавьте функционал добавления товаров в корзину
3. **Улучшить валидацию форм** - добавьте проверку на стороне сервера
4. **Написать unit-тесты** - покройте тестами модели, views и формы
5. **Добавить логирование** - настройте logging для отслеживания ошибок
6. **Оптимизировать запросы** - используйте select_related и prefetch_related
7. **Добавить обработку исключений** - используйте try-except блоки
8. **Создать requirements.txt** - зафиксируйте версии всех зависимостей

### Исправление кодового стиля:

1. Следуйте PEP 8 - используйте правильные отступы (4 пробела)
2. Добавьте docstring к функциям и классам
3. Используйте более информативные имена переменных (вместо q используйте search_query)
4. Добавьте type hints для параметров функций

---

## ЗАКЛЮЧЕНИЕ

Ваша работа демонстрирует базовое понимание фреймворка Django и умение создавать простые веб-приложения. Вы правильно организовали структуру проекта, создали необходимые модели данных и настроили маршрутизацию.

Однако работа содержит критические ошибки, которые препятствуют корректной работе приложения:
- Синтаксические ошибки приводили к падению сервера
- Опечатки в коде нарушали функциональность поиска
- Отсутствие необходимых настроек не позволяло отображать изображения

Кроме того, основные требования домашнего задания (Swagger, CORS, Docker, документация) не были выполнены, что делает невозможным зачёт работы в текущем виде.

После исправления всех обнаруженных ошибок и выполнения требований задания работа может быть представлена на повторную проверку.

**Срок доработки:** до следующего занятия  
**Возможность консультации:** по предварительной договорённости

Обратите особое внимание на тестирование кода перед сдачей. Запускайте сервер и проверяйте работоспособность всех функций. Используйте DEBUG = True при разработке, чтобы видеть детальные сообщения об ошибках.

Желаю успехов в доработке!

---

**Дата:** 26 октября 2025 г.
